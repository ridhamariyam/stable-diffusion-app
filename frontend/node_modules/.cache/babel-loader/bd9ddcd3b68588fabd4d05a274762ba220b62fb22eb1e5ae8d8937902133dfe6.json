{"ast":null,"code":"var _jsxFileName = \"/home/ridha/Documents/ai_project/fastapi_ml_stablediffusion/frontend/src/components/GenImage.jsx\",\n  _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport ErrorMessage from \"./ErrorMessage\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GenImage = () => {\n  _s();\n  const [prompt, setPrompt] = useState(\"\");\n  const [seed, setSeed] = useState(42);\n  const [guidanceScale, setGuidanceScale] = useState(7.5);\n  const [numInfSteps, setNumInfSteps] = useState(10);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [img, setImg] = useState(null);\n  const [promptImg, setPromptImg] = useState(null);\n  const [loadingImg, setLoadingImg] = useState(false);\n  const cleanFormData = () => {\n    setPrompt(\"\");\n    setSeed(42);\n    setGuidanceScale(7.5);\n    setNumInfSteps(5);\n    setLoadingImg(false);\n    setErrorMessage(\"\");\n  };\n\n  // create a function that handles creating the lead\n  const handleGenerateImage = async e => {\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n    setLoadingImg(true);\n    // body: JSON.stringify(`prompt=${prompt}&num_inference_steps=${numInfSteps}&guidance_scale=${guidanceScale}&seed=`)\n    const response = await fetch(`/api/generate/?prompt=${prompt}&num_inference_steps=${numInfSteps}&guidance_scale=${guidanceScale}&seed=${seed}`, requestOptions);\n    if (!response.ok) {\n      setErrorMessage(\"Ooops! Something went wrong generating the image\");\n    } else {\n      const imageBlob = await response.blob();\n      const imageObjectURL = URL.createObjectURL(imageBlob);\n      setImg(imageObjectURL);\n      setPromptImg(prompt);\n      cleanFormData();\n    }\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    setImg(null);\n    setPromptImg(null);\n    handleGenerateImage();\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"columns is-vcentered\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"column\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"box\",\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"title has-text-centered is-4\",\n            children: \"Generate Image with Stable Diffuser\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"field\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"label\",\n              children: \"Prompt\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"control\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"Enter your prompt to generate the image\",\n                value: prompt,\n                onChange: e => setPrompt(e.target.value),\n                className: \"textarea\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 63,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"field\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"label\",\n              children: \"Seed\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"control\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"seed\",\n                value: seed,\n                onChange: e => setSeed(e.target.value),\n                className: \"input\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 76,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"field\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"label\",\n              children: \"Guidance Scale\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"control\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"guidancescale\",\n                value: guidanceScale,\n                onChange: e => setGuidanceScale(e.target.value),\n                className: \"input\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"field\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"label\",\n              children: \"Number of Inference Steps - Bigger is Slower, Better Quality\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"control\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"Bigger is Slower, Better Quality\",\n                value: numInfSteps,\n                onChange: e => setNumInfSteps(e.target.value),\n                className: \"input\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n            message: errorMessage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"button is-primary\",\n            type: \"submit\",\n            children: \"Generate Image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"column\",\n        children: [img ? /*#__PURE__*/_jsxDEV(\"figure\", {\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: img,\n            alt: \"genimage\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"figcaption\", {\n            children: promptImg\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), loadingImg ? /*#__PURE__*/_jsxDEV(\"progress\", {\n          className: \"progress is-small is-primary\",\n          max: \"100\",\n          children: \"Loading\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 17\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n};\n_s(GenImage, \"D5/6wNAWIEwlWuDGZgDuaKOy51c=\");\n_c = GenImage;\nexport default GenImage;\nvar _c;\n$RefreshReg$(_c, \"GenImage\");","map":{"version":3,"names":["useState","ErrorMessage","GenImage","prompt","setPrompt","seed","setSeed","guidanceScale","setGuidanceScale","numInfSteps","setNumInfSteps","errorMessage","setErrorMessage","img","setImg","promptImg","setPromptImg","loadingImg","setLoadingImg","cleanFormData","handleGenerateImage","e","requestOptions","method","headers","response","fetch","ok","imageBlob","blob","imageObjectURL","URL","createObjectURL","handleSubmit","preventDefault","target","value"],"sources":["/home/ridha/Documents/ai_project/fastapi_ml_stablediffusion/frontend/src/components/GenImage.jsx"],"sourcesContent":["import { useState } from \"react\";\nimport ErrorMessage from \"./ErrorMessage\";\n\nconst GenImage = () => {\n    const [prompt, setPrompt] = useState(\"\");\n    const [seed, setSeed] = useState(42);\n    const [guidanceScale, setGuidanceScale] = useState(7.5);\n    const [numInfSteps, setNumInfSteps] = useState(10);\n    const [errorMessage, setErrorMessage] = useState(\"\");\n    const [img, setImg] = useState(null);\n    const [promptImg, setPromptImg] = useState(null);\n    const [loadingImg, setLoadingImg] = useState(false);\n\n    const cleanFormData = () => {\n        setPrompt(\"\");\n        setSeed(42);\n        setGuidanceScale(7.5);\n        setNumInfSteps(5);\n        setLoadingImg(false);\n        setErrorMessage(\"\");\n    }\n\n    // create a function that handles creating the lead\n    const handleGenerateImage = async (e) => {\n\n        const requestOptions = {\n            method: \"GET\", \n            headers: {\"Content-Type\": \"application/json\"}, \n            \n        };\n\n        setLoadingImg(true);\n        // body: JSON.stringify(`prompt=${prompt}&num_inference_steps=${numInfSteps}&guidance_scale=${guidanceScale}&seed=`)\n        const response = await fetch(`/api/generate/?prompt=${prompt}&num_inference_steps=${numInfSteps}&guidance_scale=${guidanceScale}&seed=${seed}`, requestOptions);\n        \n        if (!response.ok){\n            setErrorMessage(\"Ooops! Something went wrong generating the image\");\n        } else {\n            const imageBlob = await response.blob();\n            const imageObjectURL = URL.createObjectURL(imageBlob);\n            setImg(imageObjectURL);\n            setPromptImg(prompt);\n            cleanFormData();\n        }\n    }\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        setImg(null);\n        setPromptImg(null);\n        handleGenerateImage();\n    }\n\n    return (\n        <>\n        <div className=\"columns is-vcentered\">\n            <div className=\"column\">\n                <form className=\"box\" onSubmit={handleSubmit}>\n                    <h1 className=\"title has-text-centered is-4\">Generate Image with Stable Diffuser</h1>\n                    <div className=\"field\">\n                        <label className=\"label\">Prompt</label>\n                        <div className=\"control\">\n                            <input \n                                type=\"text\" \n                                placeholder=\"Enter your prompt to generate the image\" \n                                value={prompt} \n                                onChange={(e) =>setPrompt(e.target.value)}\n                                className=\"textarea\"\n                                required\n                            /> \n                        </div>\n                    </div>\n                    <div className=\"field\">\n                        <label className=\"label\">Seed</label>\n                        <div className=\"control\">\n                            <input \n                                type=\"text\" \n                                placeholder=\"seed\" \n                                value={seed} \n                                onChange={(e) =>setSeed(e.target.value)}\n                                className=\"input\"\n                            /> \n                        </div>\n                    </div>\n                    <div className=\"field\">\n                        <label className=\"label\">Guidance Scale</label>\n                        <div className=\"control\">\n                            <input \n                                type=\"text\" \n                                placeholder=\"guidancescale\" \n                                value={guidanceScale} \n                                onChange={(e) =>setGuidanceScale(e.target.value)}\n                                className=\"input\"\n                            /> \n                        </div>\n                    </div>\n                    <div className=\"field\">\n                        <label className=\"label\">Number of Inference Steps - Bigger is Slower, Better Quality</label>\n                        <div className=\"control\">\n                            <input \n                                type=\"text\" \n                                placeholder=\"Bigger is Slower, Better Quality\" \n                                value={numInfSteps} \n                                onChange={(e) =>setNumInfSteps(e.target.value)}\n                                className=\"input\"\n                            /> \n                        </div>\n                    </div>            \n                        <ErrorMessage message={errorMessage}/>\n                    <br /> \n                    <button className=\"button is-primary\" type=\"submit\">Generate Image</button>\n                </form>\n            </div>\n            <div className=\"column\">\n            { img ? ( \n            <figure>\n                <img src={img} alt=\"genimage\" />\n                <figcaption>{promptImg}</figcaption>\n            </figure> ) \n                  : <></>\n            }\n            { loadingImg ? (\n                <progress className=\"progress is-small is-primary\" max=\"100\">Loading</progress>\n            ) : <></>\n            }\n            </div>\n        </div>\n        </>\n        \n    )\n\n\n}\n\nexport default GenImage\n"],"mappings":";;AAAA,SAASA,QAAQ,QAAQ,OAAO;AAChC,OAAOC,YAAY,MAAM,gBAAgB;AAAC;AAAA;AAE1C,MAAMC,QAAQ,GAAG,MAAM;EAAA;EACnB,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGJ,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACK,IAAI,EAAEC,OAAO,CAAC,GAAGN,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACO,aAAa,EAAEC,gBAAgB,CAAC,GAAGR,QAAQ,CAAC,GAAG,CAAC;EACvD,MAAM,CAACS,WAAW,EAAEC,cAAc,CAAC,GAAGV,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACW,YAAY,EAAEC,eAAe,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAACa,GAAG,EAAEC,MAAM,CAAC,GAAGd,QAAQ,CAAC,IAAI,CAAC;EACpC,MAAM,CAACe,SAAS,EAAEC,YAAY,CAAC,GAAGhB,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAACiB,UAAU,EAAEC,aAAa,CAAC,GAAGlB,QAAQ,CAAC,KAAK,CAAC;EAEnD,MAAMmB,aAAa,GAAG,MAAM;IACxBf,SAAS,CAAC,EAAE,CAAC;IACbE,OAAO,CAAC,EAAE,CAAC;IACXE,gBAAgB,CAAC,GAAG,CAAC;IACrBE,cAAc,CAAC,CAAC,CAAC;IACjBQ,aAAa,CAAC,KAAK,CAAC;IACpBN,eAAe,CAAC,EAAE,CAAC;EACvB,CAAC;;EAED;EACA,MAAMQ,mBAAmB,GAAG,MAAOC,CAAC,IAAK;IAErC,MAAMC,cAAc,GAAG;MACnBC,MAAM,EAAE,KAAK;MACbC,OAAO,EAAE;QAAC,cAAc,EAAE;MAAkB;IAEhD,CAAC;IAEDN,aAAa,CAAC,IAAI,CAAC;IACnB;IACA,MAAMO,QAAQ,GAAG,MAAMC,KAAK,CAAE,yBAAwBvB,MAAO,wBAAuBM,WAAY,mBAAkBF,aAAc,SAAQF,IAAK,EAAC,EAAEiB,cAAc,CAAC;IAE/J,IAAI,CAACG,QAAQ,CAACE,EAAE,EAAC;MACbf,eAAe,CAAC,kDAAkD,CAAC;IACvE,CAAC,MAAM;MACH,MAAMgB,SAAS,GAAG,MAAMH,QAAQ,CAACI,IAAI,EAAE;MACvC,MAAMC,cAAc,GAAGC,GAAG,CAACC,eAAe,CAACJ,SAAS,CAAC;MACrDd,MAAM,CAACgB,cAAc,CAAC;MACtBd,YAAY,CAACb,MAAM,CAAC;MACpBgB,aAAa,EAAE;IACnB;EACJ,CAAC;EAED,MAAMc,YAAY,GAAIZ,CAAC,IAAK;IACxBA,CAAC,CAACa,cAAc,EAAE;IAClBpB,MAAM,CAAC,IAAI,CAAC;IACZE,YAAY,CAAC,IAAI,CAAC;IAClBI,mBAAmB,EAAE;EACzB,CAAC;EAED,oBACI;IAAA,uBACA;MAAK,SAAS,EAAC,sBAAsB;MAAA,wBACjC;QAAK,SAAS,EAAC,QAAQ;QAAA,uBACnB;UAAM,SAAS,EAAC,KAAK;UAAC,QAAQ,EAAEa,YAAa;UAAA,wBACzC;YAAI,SAAS,EAAC,8BAA8B;YAAA,UAAC;UAAmC;YAAA;YAAA;YAAA;UAAA,QAAK,eACrF;YAAK,SAAS,EAAC,OAAO;YAAA,wBAClB;cAAO,SAAS,EAAC,OAAO;cAAA,UAAC;YAAM;cAAA;cAAA;cAAA;YAAA,QAAQ,eACvC;cAAK,SAAS,EAAC,SAAS;cAAA,uBACpB;gBACI,IAAI,EAAC,MAAM;gBACX,WAAW,EAAC,yCAAyC;gBACrD,KAAK,EAAE9B,MAAO;gBACd,QAAQ,EAAGkB,CAAC,IAAIjB,SAAS,CAACiB,CAAC,CAACc,MAAM,CAACC,KAAK,CAAE;gBAC1C,SAAS,EAAC,UAAU;gBACpB,QAAQ;cAAA;gBAAA;gBAAA;gBAAA;cAAA;YACV;cAAA;cAAA;cAAA;YAAA,QACA;UAAA;YAAA;YAAA;YAAA;UAAA,QACJ,eACN;YAAK,SAAS,EAAC,OAAO;YAAA,wBAClB;cAAO,SAAS,EAAC,OAAO;cAAA,UAAC;YAAI;cAAA;cAAA;cAAA;YAAA,QAAQ,eACrC;cAAK,SAAS,EAAC,SAAS;cAAA,uBACpB;gBACI,IAAI,EAAC,MAAM;gBACX,WAAW,EAAC,MAAM;gBAClB,KAAK,EAAE/B,IAAK;gBACZ,QAAQ,EAAGgB,CAAC,IAAIf,OAAO,CAACe,CAAC,CAACc,MAAM,CAACC,KAAK,CAAE;gBACxC,SAAS,EAAC;cAAO;gBAAA;gBAAA;gBAAA;cAAA;YACnB;cAAA;cAAA;cAAA;YAAA,QACA;UAAA;YAAA;YAAA;YAAA;UAAA,QACJ,eACN;YAAK,SAAS,EAAC,OAAO;YAAA,wBAClB;cAAO,SAAS,EAAC,OAAO;cAAA,UAAC;YAAc;cAAA;cAAA;cAAA;YAAA,QAAQ,eAC/C;cAAK,SAAS,EAAC,SAAS;cAAA,uBACpB;gBACI,IAAI,EAAC,MAAM;gBACX,WAAW,EAAC,eAAe;gBAC3B,KAAK,EAAE7B,aAAc;gBACrB,QAAQ,EAAGc,CAAC,IAAIb,gBAAgB,CAACa,CAAC,CAACc,MAAM,CAACC,KAAK,CAAE;gBACjD,SAAS,EAAC;cAAO;gBAAA;gBAAA;gBAAA;cAAA;YACnB;cAAA;cAAA;cAAA;YAAA,QACA;UAAA;YAAA;YAAA;YAAA;UAAA,QACJ,eACN;YAAK,SAAS,EAAC,OAAO;YAAA,wBAClB;cAAO,SAAS,EAAC,OAAO;cAAA,UAAC;YAA4D;cAAA;cAAA;cAAA;YAAA,QAAQ,eAC7F;cAAK,SAAS,EAAC,SAAS;cAAA,uBACpB;gBACI,IAAI,EAAC,MAAM;gBACX,WAAW,EAAC,kCAAkC;gBAC9C,KAAK,EAAE3B,WAAY;gBACnB,QAAQ,EAAGY,CAAC,IAAIX,cAAc,CAACW,CAAC,CAACc,MAAM,CAACC,KAAK,CAAE;gBAC/C,SAAS,EAAC;cAAO;gBAAA;gBAAA;gBAAA;cAAA;YACnB;cAAA;cAAA;cAAA;YAAA,QACA;UAAA;YAAA;YAAA;YAAA;UAAA,QACJ,eACF,QAAC,YAAY;YAAC,OAAO,EAAEzB;UAAa;YAAA;YAAA;YAAA;UAAA,QAAE,eAC1C;YAAA;YAAA;YAAA;UAAA,QAAM,eACN;YAAQ,SAAS,EAAC,mBAAmB;YAAC,IAAI,EAAC,QAAQ;YAAA,UAAC;UAAc;YAAA;YAAA;YAAA;UAAA,QAAS;QAAA;UAAA;UAAA;UAAA;QAAA;MACxE;QAAA;QAAA;QAAA;MAAA,QACL,eACN;QAAK,SAAS,EAAC,QAAQ;QAAA,WACrBE,GAAG,gBACL;UAAA,wBACI;YAAK,GAAG,EAAEA,GAAI;YAAC,GAAG,EAAC;UAAU;YAAA;YAAA;YAAA;UAAA,QAAG,eAChC;YAAA,UAAaE;UAAS;YAAA;YAAA;YAAA;UAAA,QAAc;QAAA;UAAA;UAAA;UAAA;QAAA,QAC/B,gBACD,qCAAK,EAEXE,UAAU,gBACR;UAAU,SAAS,EAAC,8BAA8B;UAAC,GAAG,EAAC,KAAK;UAAA,UAAC;QAAO;UAAA;UAAA;UAAA;QAAA,QAAW,gBAC/E,qCAAK;MAAA;QAAA;QAAA;QAAA;MAAA,QAEH;IAAA;MAAA;MAAA;MAAA;IAAA;EACJ,iBACH;AAKX,CAAC;AAAA,GAjIKf,QAAQ;AAAA,KAARA,QAAQ;AAmId,eAAeA,QAAQ;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}